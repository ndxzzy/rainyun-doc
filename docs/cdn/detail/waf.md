# CC防火墙

CC防火墙，可以针对请求cc/刷量攻击进行防御，目前支持两种模式：`雨盾模式`和`外部防御`模式。

触发防御后，自动开启智能CC攻击过滤（可能会降低访问速度）或者自动解析域名到其他地址。

## 防御触发条件

若满足下方条件之一将会自动触发防御：

* 持续带宽突发
* 持续带宽较高
* 持续请求数超高且回源错误率超高
* 手动开启防御模式


| 配置项        | 说明                                 |
|------------|------------------------------------|
| 高带宽阈值      | 高带宽阈值，持续超出该值将会触发防御，单位为kb/s         |
| 高带宽持续时间    | 高带宽持续设置的分钟数将会触发防御                  |
| 突发带宽阈值     | 突发带宽阈值，持续超出该值将会触发防御，单位为kb/s        |
| 请求数阈值      | 每秒请求次速阈值，超过该次数并且大于设置的回源错误率阈值将会触发防御 |
| 回源错误率阈值    | ，回源错误率阈值，超过该次数并且大于设置的回源错误率阈值将会触发防御 |
| 触发后，防御持续时间 | 触发防御后防御持续时间                        |
| 常用缓存路径     | 触发流量阈值时自动清理这些路径的缓存                 |

![](https://cn-sy1.rains3.com/rainyun-assets/pic/2024/10/20241016171425_eaedcff75b180f1a635110af10dd62df.png)

### 雨盾拦截规则

| 配置项        | 说明                   |
|------------|----------------------|
| 全局访问速率限制   | 限制每秒的访问速率            |
| 全局访问速率允许突发 | 限制突发次数               |
| 全局下载速率限制   | 限制cdn速率，单位MB/s       |
| 全局下载允许突发   | 全局下载允许突发             |
| 单个IP访问速率限制 | 单个ip每秒访问速率           |
| 单个IP访问允许突发 | 单ip允许的突发访问           |
| 黑洞时间       | 触发拦截规则后的黑洞时间         |
| JS验证       | 是否开启JS验证             |
| 境外默认防御     | 如果开启，境外ip都将会按照拦截规则过滤 |

### 外部防御解析设置

| 配置项     | 说明                  |
|---------|---------------------|
| 解析切换    | 如果防御被触发将自动切换解析到下方地址 |
| 是否停用cdn | 如果防御被触发可以选择是否关闭cdn  |





